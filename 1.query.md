# Query 사용법
## 기본 쿼리문 작성법

```graphql
query {
  allLifts {
    name
    status
  }
}
```

## 두 개를 한 번에 불러오고 싶을 경우

```graphql
query liftsAndTrails {
  liftCount(status: OPEN)
  allLifts {
    name
    status
  }
  allTrails {
    name
    status
  }
}
```

Query는 GraphQL의 타입이다. 이것은 **루트 타입**이다. 타입 하나가 곧 하나의 작업을 수행하며, 작업이 곧 쿼리 문서의 루트를 의미한다. GraphQL API에서 query에 사용할 수 있는 필드는 API 스키마에 정의한다. 쿼리 작성 시 중요한 것은 필요한 필드만 요청하는 것이다.

쿼리를 작성할 때는 필요한 필드를 중괄호로 감싼다. 이 중괄호로 묶인 블록을 **셀렉션 세트**라고 한다. 그 안에 들어가는 필드는 GraphQL 타입과 직접적으로 연관이 있다. 셀렉션 세트는 서로 중첩시킬 수 있다.

응답 객체에 필드명을 다르게 받고 싶다면, 쿼리 안에 필드명에 별칭을 부여하면 된다.

```graphql
query liftsAndTrails {
  open: liftCount(status: OPEN)
  chairlifts: allLifts {
    liftName: name
    status
  }
  skiSlopes: allTrails {
    trailName: name
    difficulty
  }
}
```

GraphQL 쿼리결과에 대한 필터링 작업을 하고 싶다면 **쿼리 인자**를 넘기면 된다. 쿼리 필드와 관련 있는 키-값 쌍을 하나 이상 인자로 넣을 수 있다. 현재 가동 중이 아닌 리프트의 이름만 받고 싶다면 인자를 다음과 같이 넘겨 응답 결과를 필터링하면 된다.

```graphql
query closedLifts {
  allLifts(status: CLOSED) {
    name
    status
  }
}
```

데이터를 선택하는 용도로 인자를 활용할 수 있다. 예를 들어 개별 리프트의 상태에 대한 쿼리를 작성하고 싶다면, 리프트의 아이디를 사용해 해당 리프트를 선택할 수 있다.

```graphql
query jazzCatStatus {
  Lift(id: "jazz-cat") {
    name
    status
    night
    elevationGain
  }
}
```

## 엣지와 연결
GraphQL 쿼리어에서 필드는 **스칼라** 타입과 **객체** 타입 둘 중 하나에 속하게 된다. 쿼리 셀렉션 세트의 잎이 되어 주는 타입이다. 

### GraphQL에서는 다섯 가지 스칼라 타입이 내장되어 있다.

- ID: 고유 식별자
- Int: 정수
- Float: 실수
- String: 정수형
- Boolean: 불

정수와 실수는 JSON 숫자 타입 데이터를 돌려주고, 문자열과 ID 타입은 JSON 문자열 데이터를 반환한다. ID 타입은 반드시 유일한 문자를 반환하도록 되었다.
